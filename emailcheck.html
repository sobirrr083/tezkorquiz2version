<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <title>Firebase Auth Email olish</title>
</head>
<body>

  <h2>Firebase Authentication</h2>

  <button id="googleLogin">Google orqali kirish</button>
  <button id="logout">Chiqish</button>

  <p id="status">Holat: tekshirilmoqda...</p>
  <p id="email"></p>
  <p id="uid"></p>

  <script type="module">
    // 1. Firebase importlari
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import {
      getAuth,
      onAuthStateChanged,
      GoogleAuthProvider,
      signInWithPopup,
      signOut
    } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

    // 2. Firebase config (O'ZINGIZNIKINI QO'YING)
    const firebaseConfig = {
      apiKey: "AIzaSyBxIpLY5WasiSIlDL4japBLnnXRwOLUKEQ",
      authDomain: "tezkor-quiz-bbe3c.firebaseapp.com",
      projectId: "tezkor-quiz-bbe3c",
      appId: "1:143161522496:web:252108ace3a4c19f35e2a5",
    };

    // 3. Firebase init
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();

    // 4. Google login
    document.getElementById("googleLogin").onclick = () => {
      signInWithPopup(auth, provider)
        .then((result) => {
          console.log("Google login muvaffaqiyatli");
        })
        .catch((error) => {
          console.error(error);
        });
    };

    // 5. Logout
    document.getElementById("logout").onclick = () => {
      signOut(auth);
    };

    // 6. HAMMA HOLATLAR UCHUN EMAILNI OLISH
    onAuthStateChanged(auth, (user) => {
      if (user) {
        document.getElementById("status").innerText = "Holat: login qilingan";
        document.getElementById("email").innerText = "Email: " + user.email;
        document.getElementById("uid").innerText = "UID: " + user.uid;

        console.log("Email:", user.email);
        console.log("Provider:", user.providerData[0].providerId);
      } else {
        document.getElementById("status").innerText = "Holat: login qilinmagan";
        document.getElementById("email").innerText = "";
        document.getElementById("uid").innerText = "";
      }
    });
  </script>

</body>
</html>
